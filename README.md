# Google Summer of Code 2023.

**Organisation**: [CRIU](https://criu.org)
<br>
**Mentors**: [Adrian Reber](https://github.com/areber), [Radostin Stoyanov](https://github.com/rst0git)
<br>
**Proposal**: [Forensic analysis of container checkpoints](proposal.pdf)
<br>
**GSoC 2023 project page**: [Forensic analysis of container checkpoints](https://summerofcode.withgoogle.com/programs/2023/projects/CdBgTw7S)
<br>

## Background

### CRIU
CRIU (Checkpoint/Restore In Userspace) is a Linux software tool that make it possible to freeze a running process or application at a specific point in time and then later restore it to that exact state. It's like taking a snapshot of the process's current state, including its memory, files, and other resources, and then being able to resume the process from that snapshot later on. 

### crit

[crit](https://github.com/checkpoint-restore/go-criu/tree/master/crit) serves as both a command-line interface and a package within [go-criu](https://github.com/checkpoint-restore/go-criu) offering low level features for decoding, encoding, and manipulating CRIU image files.


### checkpointctl

[checkpointctl](https://github.com/checkpoint-restore/checkpointctl), a CLI tool written in Go, is designed for inspecting checkpoints generated by CRIU. It provides an intuitive and user-friendly approach to extracting valuable information from container checkpoints.


## Work Done

My contribution during this GSoC project was mainly about enhancing [go-criu](https://github.com/checkpoint-restore/go-criu) and [checkpointctl](https://github.com/checkpoint-restore/checkpointctl) with memory analysis features. The goal was to make [checkpointctl](https://github.com/checkpoint-restore/checkpointctl) a user-friendly CLI tool for memory analysis of container checkpoints.

### go-criu
In the [go-criu](https://github.com/checkpoint-restore/go-criu) repository, I expanded the [crit](https://github.com/checkpoint-restore/go-criu/tree/master/crit) package by incorporating low-level memory analysis features for CRIU images.

Pull requests:
- [crit: add features to retrieve memory pages](https://github.com/checkpoint-restore/go-criu/pull/133)
- [crit: add FindPs method on PsTree](https://github.com/checkpoint-restore/go-criu/pull/145)
- [crit: add method to retrieve shared memory size of process](https://github.com/checkpoint-restore/go-criu/pull/146)

### checkpointcl
Concurrently, I integrated the memory analysis features from [go-criu](https://github.com/checkpoint-restore/go-criu) into the [checkpointctl](https://github.com/checkpoint-restore/checkpointctl).
This integration included the addition of new sub-commands designed to provide a user-friendly memory analysis experience for container checkpoints.

Pull requests:
- [Optimize archive unpacking](https://github.com/checkpoint-restore/checkpointctl/pull/55)
- [show: add support for listing multiple checkpoints](https://github.com/checkpoint-restore/checkpointctl/pull/67)
- [feat: add new `inspect` sub-command](https://github.com/checkpoint-restore/checkpointctl/pull/76)
- [feat: display process tree with command line arguments](https://github.com/checkpoint-restore/checkpointctl/pull/89)
- [feat: display process tree with environment variables](https://github.com/checkpoint-restore/checkpointctl/pull/90)
- [feat: add `memparse` sub-command](https://github.com/checkpoint-restore/checkpointctl/pull/95)

## Demo Tutorial (TODO: Link to a tutorial article)

## Acknowledgments
I am grateful to my mentors, [Radostin Stoyanov](https://github.com/rst0git) and [Adrian Reber](https://github.com/adrianreber), for their guidance and support throughout this GSoC journey. I would also like to acknowledge my co-mentee, [Prajwal S N](https://github.com/snprajwal), for his valuable contributions and insightful reviews. Finally, I express my sincere appreciation to the CRIU organization and the Google Summer of Code program for providing me with this invaluable opportunity for learning and contributing to FOSS.